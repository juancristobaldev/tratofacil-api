# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type AuthType {
  """Token JWT para sesiones autorizadas"""
  accessToken: String!

  """Información del usuario autenticado"""
  user: User!
}

type BankAccount {
  accountNumber: String!
  accountType: String!
  bankName: String!
  createdAt: DateTime!
  email: String
  id: Int!
  providerId: Int!
  rut: String
  updatedAt: DateTime!
}

input BankAccountInput {
  accountNumber: String!
  accountType: String!
  bankName: String!
  email: String
  rut: String
}

type Category {
  description: String
  id: Int!
  imageUrl: String
  name: String!
  parentId: Int

  """Servicios asociados a esta categoría"""
  services: [Service]
  slug: String!
}

type CategoryProduct {
  createdAt: DateTime!
  description: String
  id: Int!
  name: String!

  """Lista de productos que pertenecen a esta categoría"""
  products: [Product]
  slug: String!
  updatedAt: DateTime!
}

type ConditionDelivery {
  confirmationDeadline: DateTime!
  createdAt: DateTime!
  deliveryType: String!
  id: Int!
  maxDispatchDays: Int!
  productId: Int!
  shippingPayer: String!
  updatedAt: DateTime!
}

input ConditionDeliveryInput {
  confirmationDeadline: DateTime!
  deliveryType: String!
  maxDispatchDays: Int!
  shippingPayer: String!
}

input CreateCategoryInput {
  description: String
  imageUrl: String
  name: String!
  parentId: Int
  slug: String!
}

input CreateCategoryProductInput {
  description: String
  name: String!
  slug: String!
}

input CreateCertificateInput {
  fileUrl: String!
  institution: String
  title: String!
  year: Int
}

input CreateHobbyInput {
  name: String!
  providerId: Int!
}

input CreateJobInput {
  description: String
  price: Float
  title: String!
}

input CreateOrderInput {
  serviceProviderId: Int!
  total: Float!
  wcOrderId: Int
  wcOrderKey: String
}

input CreateOrderJobInput {
  jobId: Int!
  total: Float
}

input CreateOrderProductInput {
  productId: Int!
  quantity: Int!
}

input CreatePlanOrderInput {
  interval: PlanInterval!
  plan: ProviderPlan!
}

input CreateProductInput {
  categoryProductId: Int!
  conditions: ConditionDeliveryInput!
  description: String
  imageUrls: [String!]
  name: String!
  price: Float!
  slug: String!
  stock: Int!
}

input CreateProviderInput {
  bank: BankAccountInput
  company: String
  location: String
  logoUrl: String
  name: String!
  rut: String!
}

input CreateReviewInput {
  comment: String
  orderId: Int!
  providerId: Int!
  rating: Int!
}

input CreateReviewsJobInput {
  comment: String
  jobId: Int!
  providerId: Int!
  rating: Int!
}

input CreateServiceInput {
  categoryId: Int
  city: String
  description: String
  hasHomeVisit: Boolean!
  price: Int!
  slug: String!
}

input CreateShippingInfoInput {
  commune: String!
  dept: String
  number: String!
  phone: String!
  reference: String
  region: String!
  street: String!
}

input CredentialsInput {
  email: String!
  password: String!
  phone: String!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

input DeleteHobbyInput {
  id: Int!
}

type Hobby {
  id: Int!
  name: String!
}

input IdentityInput {
  company: String
  firstName: String!
  lastName: String!
  phone: String!
  rut: String!
}

type Job {
  createdAt: DateTime!
  description: String
  id: Int!
  orders: [OrderJob!]
  price: Float
  provider: Provider!
  providerId: Int!
  reviews: [ReviewsJob!]
  title: String!
  updatedAt: DateTime!
}

input LoginInput {
  email: String!
  password: String!
}

type Mutation {
  adminCreateCategory(description: String, imageUrl: String, name: String!, parentId: Int, slug: String!): Category!
  adminCreateService(categoryId: Int, description: String, imageUrl: String, name: String!, slug: String!): Service!
  adminDeleteCategory(id: Int!): Boolean!
  adminDeleteJob(id: Int!): Job!
  adminDeleteJobReview(id: Int!): Boolean!
  adminDeleteOrder(id: Int!): Boolean!
  adminDeleteReview(id: Int!): Boolean!
  adminDeleteService(id: Int!): Boolean!
  adminDeleteUser(id: Int!): Boolean!
  adminUpdateCategory(description: String, id: Int!, imageUrl: String, name: String, parentId: Int, slug: String): Category!
  adminUpdateOrderJobStatus(id: Int!, status: String!): OrderJob!
  adminUpdateOrderStatus(id: Int!, status: OrderStatus!): Order!
  adminUpdateService(categoryId: Int, description: String, id: Int!, imageUrl: String, name: String, slug: String): Service!
  adminUpdateUser(id: Int!, role: Role, status: Int): User!
  adminVerifyCertificate(id: Int!, verified: Boolean!): ProviderCertificate!
  approveCertificate(id: Int!): ProviderCertificate!

  """
  Inicia el flujo de pago para adquirir un plan (PREMIUM o FULL) con intervalo mensual/anual
  """
  buyPlan(input: CreatePlanOrderInput!, returnUrl: String!): WebpayResponse!

  """Confirma el código y crea el perfil de usuario + proveedor"""
  confirmEmailAndCreateUser(code: String!, credentials: CredentialsInput!, identity: IdentityInput!): AuthType!
  confirmPayment(token: String!): Order!
  confirmProductPayment(token: String!): OrderProduct!

  """
  Confirma la transacción de Webpay y activa el plan en el perfil del proveedor
  """
  confirmWebPayTransactionPlans(token: String!): PlanOrder!
  confirmWebpayJob(token: String!): OrderJob!
  confirmWebpayProductTransaction(token: String!): OrderProduct!
  createCategory(input: CreateCategoryInput!): Category!
  createCategoryProduct(input: CreateCategoryProductInput!): CategoryProduct!
  createCertificate(input: CreateCertificateInput!): ProviderCertificate!
  createHobby(createHobbyInput: CreateHobbyInput!): Hobby!
  createJob(input: CreateJobInput!): Job!
  createOrder(input: CreateOrderInput!): Order!
  createOrderJobWithPayment(input: CreateOrderJobInput!): OrderJob!
  createOrderProduct(input: CreateOrderProductInput!, shippingInput: CreateShippingInfoInput!): OrderProductWithPaymentResponse!
  createProduct(input: CreateProductInput!): Product!
  createReview(input: CreateReviewInput!): ProviderReview!
  createReviewJob(input: CreateReviewsJobInput!): ReviewsJob!
  createService(input: CreateServiceInput!): ServiceProvider!
  deleteCategory(id: Int!): Category!
  deleteCertificate(id: Int!): Boolean!
  deleteHobby(deleteHobbyInput: DeleteHobbyInput!): Hobby!
  deleteService(id: Int!): Boolean!

  """Verifica disponibilidad de email y envía código de validación"""
  findCredentialsAfterSendEmail(input: CredentialsInput!): Boolean!
  initWebpayJob(orderJobId: Int!, returnUrl: String!): WebpayResponse!
  initWebpayProductTransaction(orderId: Int!, returnUrl: String!): WebpayResponse!
  initiatePayment(orderId: Int!, returnUrl: String!): WebpayResponse!
  initiateProductPayment(orderProductId: Int!, returnUrl: String!): WebpayResponse!

  """Inicia sesión y retorna el token con la info del usuario"""
  login(loginInput: LoginInput!): AuthType!

  """Registra un usuario nuevo (Cliente por defecto)"""
  register(input: RegisterUserInput!): AuthType!
  registerProvider(input: CreateProviderInput!): Provider!
  rejectCertificate(id: Int!): ProviderCertificate!
  removeCategoryProduct(id: Int!): CategoryProduct!
  removeJob(id: Int!): Job!
  removeProduct(id: Int!): Product!
  updateBank(input: BankAccountInput!, providerId: Int!): BankAccount!
  updateCategory(id: Int!, input: UpdateCategoryInput!): Category!
  updateCategoryProduct(input: UpdateCategoryProductInput!): CategoryProduct!
  updateCertificate(input: UpdateCertificateInput!): ProviderCertificate!
  updateJob(input: UpdateJobInput!): Job!
  updateOrderProductShipping(input: UpdateShippingInput!): OrderProduct!
  updateOrderProductStatus(orderId: Int!, status: OrderStatus!): OrderProduct!
  updateOrderStatus(orderId: Int!, providerId: Int!, status: OrderStatus!): Order!
  updateProduct(input: UpdateProductInput!): Product!
  updateProductStock(
    id: Int!

    """Cantidad a añadir (+) o quitar (-)"""
    quantity: Int!
  ): Product!
  updateProvider(id: Int!, input: UpdateProviderInput!): Provider!
  updateService(id: Int!, input: UpdateServiceInput!): ServiceProvider!
  updateUser(input: UpdateUserInput!): User!
}

type Order {
  """Cliente que realizó la orden"""
  client: User!
  clientId: Int!
  createdAt: DateTime!
  id: Int!
  payment: Payment
  review: ProviderReview

  """Servicio específico contratado"""
  serviceProvider: ServiceProvider
  serviceProviderId: Int
  status: OrderStatus!
  total: Float!
  updatedAt: DateTime!
  wcOrderId: Int
  wcOrderKey: String
}

type OrderJob {
  client: User!
  clientId: Int!
  createdAt: DateTime!
  id: Int!
  job: Job!
  jobId: Int!
  payment: PaymentJob
  status: OrderStatus!
  total: Float
  updatedAt: DateTime!
}

type OrderProduct {
  """Cliente que realizó la compra"""
  client: User!
  clientId: Int!
  commission: Float!
  createdAt: DateTime!
  id: Int!

  """Información del pago asociado"""
  payment: PaymentProduct

  """Producto físico adquirido"""
  product: Product!
  productId: Int!

  """Vendedor del producto"""
  provider: Provider!
  providerId: Int!
  quantity: Int!

  """Empresa de transporte encargada del envío"""
  shippingCompany: String

  """Datos de envio"""
  shippingInfo: ShippingInfo!
  status: OrderStatus!
  total: Float!

  """Código de seguimiento del paquete"""
  trackingCode: String
  unitPrice: Float!
  updatedAt: DateTime!
}

type OrderProductWithPaymentResponse {
  order: OrderProduct!
  payment: PaymentProduct!
}

"""Estado de una orden"""
enum OrderStatus {
  CANCELLED
  COMPLETED
  FAILED
  PENDING
  PROCESSING
  SUCCESS
}

type Payment {
  amount: Float!
  createdAt: DateTime!
  id: Int!

  """Orden asociada a este pago"""
  order: Order!
  orderId: Int!
  provider: PaymentProvider!
  status: PaymentStatus!
  transactionId: String
  updatedAt: DateTime!
}

type PaymentJob {
  amount: Float!
  createdAt: DateTime!
  id: Int!
  orderJob: OrderJob
  orderJobId: Int
  provider: PaymentProvider!
  status: PaymentStatus!
  transactionId: String
  updatedAt: DateTime!
}

type PaymentPlan {
  amount: Float!
  createdAt: DateTime!
  id: Int!
  orderId: Int
  planOrderId: Int
  status: PaymentStatus!
  transactionId: String
  updatedAt: DateTime!
}

type PaymentProduct {
  amount: Float!
  createdAt: DateTime!
  id: Int!
  orderProduct: OrderProduct!
  orderProductId: Int!
  provider: PaymentProvider!
  status: PaymentStatus!
  transactionId: String
  updatedAt: DateTime!
}

enum PaymentProvider {
  MERCADOPAGO
  WEBPAY
}

enum PaymentStatus {
  CONFIRMED
  FAILED
  INITIATED
}

enum PlanInterval {
  MONTHLY
  YEARLY
}

type PlanOrder {
  createdAt: DateTime!
  id: Int!
  payment: PaymentPlan
  plan: ProviderPlan!
  status: OrderStatus!
  total: Float!
  updatedAt: DateTime!
  user: User
  userId: Int!
}

type Product {
  categoryProduct: CategoryProduct
  categoryProductId: Int!
  createdAt: DateTime!
  deliveryCondition: ConditionDelivery
  description: String
  id: Int!
  images: [ProductImage]
  name: String!
  price: Float!
  provider: Provider
  providerId: Int!
  slug: String!
  stock: Int!
}

type ProductImage {
  id: Int!
  productId: Int!
  url: String!
}

type Provider {
  bank: BankAccount
  bio: String
  certificates: [ProviderCertificate]
  createdAt: DateTime!
  hobbys: [Hobby!]
  id: Int!
  location: String
  logoUrl: String
  name: String!
  phone: String
  plan: String!
  planActive: Boolean!
  reviews: [ProviderReview]
  services: [ServiceProvider]
  slug: String!
  updatedAt: DateTime!
  user: User
  userId: Int!
  wcCategoryId: Int
}

type ProviderCertificate {
  createdAt: DateTime!
  fileUrl: String!
  id: Int!
  institution: String
  provider: ProviderType
  providerId: Int!
  title: String!
  verified: Boolean!
  year: Int
}

"""Planes disponibles para los proveedores: FREE, PREMIUM, FULL"""
enum ProviderPlan {
  FREE
  FULL
  PREMIUM
}

type ProviderReview {
  client: User!
  clientId: Int!
  comment: String
  createdAt: DateTime!
  id: Int!
  order: Order
  orderId: Int
  providerId: Int!
  rating: Int!
}

type ProviderType {
  id: Int!
  name: String!
  user: User
}

type Query {
  """Listado de todas las categorías"""
  adminCategories: [Category!]!
  adminJobReviews: [ReviewsJob!]!
  adminJobs: [Job!]!
  adminOrderJobs: [OrderJob!]!

  """Listado maestro de todas las órdenes del sistema"""
  adminOrders: [Order!]!

  """Moderación de todas las reseñas"""
  adminOrdersProduct: [OrderProduct!]!

  """Obtener todos los proveedores con sus detalles"""
  adminProviders: [Provider!]!

  """Moderación de todas las reseñas"""
  adminReviews: [ProviderReview!]!

  """Listado de servicios base disponibles"""
  adminServices: [Service!]!

  """Obtener todos los usuarios (Clientes y Admins)"""
  adminUsers: [User!]!
  categories: [Category!]!
  categoriesProducts: [CategoryProduct!]!
  category(id: Int!): Category!
  categoryProduct(id: Int!): CategoryProduct!
  findAllCategory: [CategoryProduct!]!
  getCertificateById(id: Int!): ProviderCertificate!
  getCertificates(sortOrder: String = "desc", verified: Boolean): [ProviderCertificate!]!
  getMyCertificates: [ProviderCertificate!]!

  """
  Retorna todas las órdenes de trabajo asociadas a los Jobs de un proveedor específico
  """
  getOrderJobsByProvider(providerId: Int!): [OrderJob!]!
  getOrdersByProvider(providerId: Int!): [Order!]!
  getOrdersProductByProvider(providerId: Int!): [OrderProduct!]!
  getServicesProvider(providerId: Int!): [Service!]!
  hobbies: [Hobby!]!
  hobbiesByProvider(providerId: Int!): [Hobby!]!
  hobby(id: Int!): Hobby!
  job(id: Int!): Job!
  jobs(skip: Int!, take: Int!): [Job!]!
  mainCategories: [Category!]!
  mainCategoryProducts: [CategoryProduct!]!
  me: User!
  myJobs: [Job!]!
  myOrderJobs: [OrderJob!]!
  myProvider: Provider
  myServices: [Service!]!
  ordersProductsByProvider: [OrderProduct!]!
  product(id: Int!): Product!
  productBySlug(slug: String!): Product!
  products: [Product!]!
  productsByCategory(categoryProductId: Int!): [Product!]!
  productsByProvider(providerId: Int!): [Product!]!
  provider(id: Int!): Provider
  providers: [Provider!]!
  publicProfile(userId: Int!): User
  serviceDetail(providerId: Int!, serviceId: Int!): ServiceDetail!
  servicesByCategory(categorySlug: String!, city: String): [ServiceByCategory!]!
  shippingInfoByOrderProduct(orderProductId: Int!): ShippingInfo
  subCategories: [Category!]!
  user(id: Int!): User
  users: [User!]!
}

input RegisterUserInput {
  displayName: String
  email: String!
  password: String!
  phone: String!
  role: Role! = CLIENT
  username: String
}

type ReviewsJob {
  client: User!
  clientId: Int!
  comment: String
  createdAt: DateTime!
  id: Int!
  job: Job!
  jobId: Int!
  provider: Provider!
  providerId: Int!
  rating: Int!
}

"""Roles de usuario permitidos en la aplicación"""
enum Role {
  ADMIN
  CLIENT
  PROVIDER
}

type Service {
  category: Category
  categoryId: Int
  description: String
  id: Int!
  imageUrl: String
  name: String!
  serviceProviders: [ServiceProvider]
  slug: String!
}

type ServiceByCategory {
  id: Int!
  name: String!
  providers: [ServiceProvider!]!
  slug: String!
}

type ServiceDetail {
  category: Category
  categoryId: Int
  commission: Float
  description: String
  hasHomeVisit: Boolean
  id: Int!
  imageUrl: String
  name: String!
  netAmount: Float
  price: Float
  provider: Provider
  service: Service
  serviceProviders: [ServiceProvider]
  slug: String!
}

type ServiceProvider {
  cities: [ServiceProviderOnCity!]
  commission: Float
  description: String
  hasHomeVisit: Boolean!
  id: Int!
  netAmount: Float
  orders: [Order]
  price: Float
  provider: Provider
  providerId: Int!
  service: Service
  serviceId: Int!
  slug: String!
}

type ServiceProviderOnCity {
  city: String!
  serviceProviderId: Int!
}

type ShippingInfo {
  commune: String!
  dept: String
  id: Int!
  number: String!
  orderProductId: Int!
  phone: String!
  reference: String
  region: String!
  street: String!
}

input UpdateCategoryInput {
  description: String
  id: Int!
  imageUrl: String
  name: String
  parentId: Int
  slug: String
}

input UpdateCategoryProductInput {
  description: String
  id: Int!
  name: String
  slug: String
}

input UpdateCertificateInput {
  fileUrl: String
  id: Int!
  institution: String
  title: String
  year: Int
}

input UpdateJobInput {
  description: String
  id: Int!
  price: Float
  title: String
}

input UpdateProductInput {
  categoryProductId: Int
  conditions: ConditionDeliveryInput
  description: String
  id: Int!
  imageUrls: [String!]
  name: String
  price: Float
  slug: String
  stock: Int
}

input UpdateProviderInput {
  bank: BankAccountInput
  company: String
  id: Int
  location: String
  logoUrl: String
  name: String
  phone: String
  rut: String
}

input UpdateServiceInput {
  categoryId: Int
  city: String
  description: String
  id: Int!
  name: String
  price: Int!
}

input UpdateShippingInput {
  orderId: Int!
  shippingCompany: String!
  trackingCode: String!
}

input UpdateUserInput {
  displayName: String
  email: String
  id: Int!
  nicename: String
  phone: String!
  url: String
}

type User {
  activationKey: String!
  displayName: String!
  email: String!
  id: Int!
  jobOrders: [OrderJob]
  nicename: String!
  orders: [Order]
  phone: String!
  productOrders: [OrderProduct!]
  provider: Provider
  registered: DateTime!
  reviews: [ProviderReview]
  role: Role
  status: Int!
  url: String!
  username: String!
}

type WebpayResponse {
  token: String!
  url: String!
}